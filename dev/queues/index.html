<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Queues/Deques · PureFun.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PureFun.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Purely Functional Data Structures, in Julia</a></li><li><a class="tocitem" href="../lists/">Lists</a></li><li class="is-active"><a class="tocitem" href>Queues/Deques</a><ul class="internal"><li><a class="tocitem" href="#Bootstrapped.Queue-\\S{10.1.3}"><span><code>Bootstrapped.Queue</code> <span>$\S{10.1.3}$</span></span></a></li><li><a class="tocitem" href="#RealTime.Queue-\\S{7.2}"><span><code>RealTime.Queue</code> <span>$\S{7.2}$</span></span></a></li><li><a class="tocitem" href="#HoodMelville.Queue-\\S{8.2.1}"><span><code>HoodMelville.Queue</code> <span>$\S{8.2.1}$</span></span></a></li><li class="toplevel"><a class="tocitem" href="#Function-reference"><span>Function reference</span></a></li></ul></li><li><a class="tocitem" href="../heaps/">Heaps</a></li><li><a class="tocitem" href="../dicts/">Dictionaries</a></li><li><a class="tocitem" href="../generated/streams/">Streams</a></li><li><a class="tocitem" href="../contiguous/">Small size optimizations</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../generated/estimating-pi/">Estimating π</a></li><li><a class="tocitem" href="../generated/balanced-parentheses/">Balanced Parentheses</a></li><li><a class="tocitem" href="../generated/taxicab/">Ramanujan (taxicab) numbers</a></li><li><a class="tocitem" href="../generated/suffixes/">Generating Suffixes</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Queues/Deques</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Queues/Deques</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tarakc02/PureFun.jl/blob/main//docs/src/queues.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Queues"><a class="docs-heading-anchor" href="#Queues">Queues</a><a id="Queues-1"></a><a class="docs-heading-anchor-permalink" href="#Queues" title="Permalink"></a></h1><p>Unlike lists, queues iterate in first-in, last-out order. They implement the following efficiently:</p><ul><li><code>push</code> (to push to the end, analogous to <code>Base.push!</code> – kinda wish they had called this <code>pushlast!</code> but alas)</li><li><code>first</code></li><li><code>popfirst</code></li></ul><p>You can use any existing list implementation as a Queue, using the <a href="../lists/#PureFun.Batched.@deque"><code>Batched.@deque</code></a> functor. However, the resulting queue achieves amortized constant complexity guarantees by batching expensive rebalancing operations: most operations are fast, but occasionally an operation takes <span>$\mathcal{O}(n)$</span> time, and we refer to those as <em>expensive</em> operations. In amortized mutable data structures, expensive operations restore internal balance, which guarantees you a budget of cheap operations before the next rebalancing is required. An expensive operation on an immutable data structure returns a new, balanced data structure, and once again if you restrict your usage to this new value then the amortized analysis that we used in the immutable case still applies. But unlike a mutable data structure, a given instance of an immutable data structure may have multiple <em>logical futures</em> – after calling an expensive operation, we can go back to the same imbalanced data structure and call an expensive operation again, without having first benefitted from all the cheap operations in between. The concept is explored in Chapter 6 (<span>$\S{6.1}$</span>) of <em>Purely Functional Data Structures</em>, which introduces the use of <em>lazy evaluation</em> in restoring amortized bounds in persistent settings.</p><p>Use the following queue types if your use-case involves utilizing multiple logical futures (example: concurrency/multi-threading):</p><h2 id="Bootstrapped.Queue-\\S{10.1.3}"><a class="docs-heading-anchor" href="#Bootstrapped.Queue-\\S{10.1.3}"><code>Bootstrapped.Queue</code> <span>$\S{10.1.3}$</span></a><a id="Bootstrapped.Queue-\\S{10.1.3}-1"></a><a class="docs-heading-anchor-permalink" href="#Bootstrapped.Queue-\\S{10.1.3}" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PureFun.Bootstrapped.Queue" href="#PureFun.Bootstrapped.Queue"><code>PureFun.Bootstrapped.Queue</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Bootstrapped.Queue{T}()
Bootstrapped.Queue(iter)</code></pre><p><code>first</code> takes <span>$\mathcal{O}(1)$</span> time, while both <code>push</code> and <code>popfirst</code> take <span>$\mathcal{O}(\log^{*}{n})$</span> amortized time, where <span>$\log^{*}$</span> is the <a href="https://en.wikipedia.org/wiki/Iterated_logarithm">iterated logarithm</a>, which is &quot;constant in practice.&quot; The amortized bounds extend to settings that require persistence, this is achieved via disciplined use of <a href="https://en.wikipedia.org/wiki/Lazy_evaluation"><em>lazy evaluation</em></a> along with <a href="https://en.wikipedia.org/wiki/Memoization">memoization</a></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using PureFun, PureFun.Bootstrapped
julia&gt; q = Bootstrapped.Queue(1:3)
3-element PureFun.Bootstrapped.NonEmpty{Int64}
1
2
3

julia&gt; push(q, 4)
4-element PureFun.Bootstrapped.NonEmpty{Int64}
1
2
3
4

julia&gt; popfirst(q)
2-element PureFun.Bootstrapped.NonEmpty{Int64}
2
3
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tarakc02/PureFun.jl/blob/main//src/queues/bootstrappedqueue.jl#L79-L115">source</a></section></article><h2 id="RealTime.Queue-\\S{7.2}"><a class="docs-heading-anchor" href="#RealTime.Queue-\\S{7.2}"><code>RealTime.Queue</code> <span>$\S{7.2}$</span></a><a id="RealTime.Queue-\\S{7.2}-1"></a><a class="docs-heading-anchor-permalink" href="#RealTime.Queue-\\S{7.2}" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PureFun.RealTime.Queue" href="#PureFun.RealTime.Queue"><code>PureFun.RealTime.Queue</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RealTime.Queue{T}()
RealTime.Queue(iter)</code></pre><p>All operations are worst-case <span>$\mathcal{O}(1)$</span>. These queues make heavy use of lazy evaluation. Due to the overheads associated with lazy evaluation, the <code>PureFun.RealTime.Queue</code> is slower on average than others, but can still be useful in settings (such as interactive user-interfaces) where bounded worst-case performance is more important than average performance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tarakc02/PureFun.jl/blob/main//src/queues/realtimequeue.jl#L44-L54">source</a></section></article><h2 id="HoodMelville.Queue-\\S{8.2.1}"><a class="docs-heading-anchor" href="#HoodMelville.Queue-\\S{8.2.1}"><code>HoodMelville.Queue</code> <span>$\S{8.2.1}$</span></a><a id="HoodMelville.Queue-\\S{8.2.1}-1"></a><a class="docs-heading-anchor-permalink" href="#HoodMelville.Queue-\\S{8.2.1}" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PureFun.HoodMelville.Queue" href="#PureFun.HoodMelville.Queue"><code>PureFun.HoodMelville.Queue</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">HoodMelville.Queue{T}()
HoodMelville.Queue(iter)</code></pre><p><code>HoodMelville.Queue</code>s require worst-case constant time for all 3 queue operations. Unlike the <a href="#PureFun.RealTime.Queue"><code>PureFun.RealTime.Queue</code></a>, the Hood-Melville queue does not use lazy evaluation, as it more explicitly schedules incremental work during each operation, smoothing out the costs of rebalancing across cheap operations. Since this requires doing rebalancing work before it becomes necessary, the Hood-Melville queues can end up doing unnecessary work, leading to higher on-average overheads. Use when worst-case performance is more important than average performance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tarakc02/PureFun.jl/blob/main//src/queues/hood-melville.jl#L84-L98">source</a></section></article><h1 id="Function-reference"><a class="docs-heading-anchor" href="#Function-reference">Function reference</a><a id="Function-reference-1"></a><a class="docs-heading-anchor-permalink" href="#Function-reference" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="StaticArrays.push" href="#StaticArrays.push"><code>StaticArrays.push</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">push(vec::StaticVector, item)</code></pre><p>Return a new <code>StaticVector</code> with <code>item</code> inserted on the end of <code>vec</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; push(@SVector[1, 2, 3], 4)
4-element SArray{Tuple{4},Int64,1,4} with indices SOneTo(4):
 1
 2
 3
 4</code></pre></div></section><section><div><pre><code class="nohighlight hljs">push(xs::PFQueue, x)
snoc(xs::PFQueue, x)</code></pre><p>Return the <code>PFQueue</code> that results from adding an element to the rear of <code>xs</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tarakc02/PureFun.jl/blob/main//src/pfqueue-interface.jl#L22-L27">source</a></section><section><div><pre><code class="language-julia hljs">push(xs::PFHeap, x)</code></pre><p>Return the <code>PFHeap</code> that results from adding <code>x</code> to the collection.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tarakc02/PureFun.jl/blob/main//src/pfheap-interface.jl#L29-L33">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="StaticArrays.popfirst" href="#StaticArrays.popfirst"><code>StaticArrays.popfirst</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">popfirst(vec::StaticVector)</code></pre><p>Return a new vector with the first item in <code>vec</code> removed.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; popfirst(@SVector[1,2,3])
2-element SArray{Tuple{2},Int64,1,2} with indices SOneTo(2):
 2
 3</code></pre></div></section><section><div><pre><code class="language-julia hljs">popfirst(xs)</code></pre><p>Return the collection <code>xs</code> without its first element (without modifying <code>xs</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tarakc02/PureFun.jl/blob/main//src/interfaces.jl#L61-L65">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../lists/">« Lists</a><a class="docs-footer-nextpage" href="../heaps/">Heaps »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 5 December 2022 01:17">Monday 5 December 2022</span>. Using Julia version 1.8.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
