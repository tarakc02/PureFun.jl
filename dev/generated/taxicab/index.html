<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Ramanujan (taxicab) numbers · PureFun.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PureFun.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Purely Functional Data Structures, in Julia</a></li><li><a class="tocitem" href="../../lists/">Lists</a></li><li><a class="tocitem" href="../../queues/">Queues/Deques</a></li><li><a class="tocitem" href="../../heaps/">Heaps</a></li><li><a class="tocitem" href="../../dicts/">Dictionaries</a></li><li><a class="tocitem" href="../../sets/">Sets</a></li><li><a class="tocitem" href="../streams/">Streams</a></li><li><a class="tocitem" href="../../contiguous/">Small size optimizations</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../estimating-pi/">Estimating π</a></li><li><a class="tocitem" href="../balanced-parentheses/">Balanced Parentheses</a></li><li class="is-active"><a class="tocitem" href>Ramanujan (taxicab) numbers</a></li><li><a class="tocitem" href="../suffixes/">Generating Suffixes</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Ramanujan (taxicab) numbers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Ramanujan (taxicab) numbers</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tarakc02/PureFun.jl/blob/main/docs/src/taxicab.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><pre><code class="language-julia hljs">using PureFun
using PureFun: Pairing</code></pre><p><a href="https://en.wikipedia.org/wiki/Taxicab_number">Taxicab numbers</a> are numbers that can be expressed as the sum of cubes in two different ways. In this exercise we&#39;ll create an iterator over taxicab numbers less than <code>k</code>. We do this by generating pairs of integers and ordering them by the sum of their cubes, and then iterate through them in order looking for adjacent pairs with the same sum of cubes. We use a custom <a href="https://docs.julialang.org/en/v1/base/sort/#Alternate-orderings">ordering</a> to order a heap by the sum of cubes.</p><pre><code class="language-julia hljs">sum_of_cubes(x,y) = x^3 + y^3
sum_of_cubes(pair) = sum_of_cubes(pair[1], pair[2]);

function taxi(k)
    all_pairs = distinct_pairs(k)
    ordered_pairs = Pairing.Heap(all_pairs,
                                 Base.Order.By(sum_of_cubes))
    consecutive_matches(ordered_pairs)
end</code></pre><pre><code class="nohighlight hljs">taxi (generic function with 1 method)</code></pre><p>We still need to implement the underlying iterators <code>distinct_pairs</code>, which generates pairs of integers, and <code>consecutive matches</code>, which scans an iterator that&#39;s already ordered for pairs of duplicates:</p><pre><code class="language-julia hljs">distinct_pairs(k) = ((p,q) for (p,q) in Iterators.product(1:k, 1:k) if p &lt; q)
adjacent_pairs(it) = zip(it, Iterators.drop(it, 1));

function consecutive_matches(pair_stream)
    (
     (pair1,pair2) for (pair1,pair2) in adjacent_pairs(pair_stream)
     if sum_of_cubes(pair1) == sum_of_cubes(pair2)
    )
end</code></pre><pre><code class="nohighlight hljs">consecutive_matches (generic function with 1 method)</code></pre><p>The results:</p><pre><code class="language-julia hljs">for t in taxi(75)
    println(sum_of_cubes(t[1]), &quot;: &quot;, t[1], &quot; &quot;, t[2], &quot; :&quot;, sum_of_cubes(t[2]))
end</code></pre><pre><code class="nohighlight hljs">1729: (1, 12) (9, 10) :1729
4104: (2, 16) (9, 15) :4104
13832: (2, 24) (18, 20) :13832
20683: (10, 27) (19, 24) :20683
32832: (4, 32) (18, 30) :32832
39312: (2, 34) (15, 33) :39312
40033: (9, 34) (16, 33) :40033
46683: (3, 36) (27, 30) :46683
64232: (17, 39) (26, 36) :64232
65728: (31, 33) (12, 40) :65728
110656: (4, 48) (36, 40) :110656
110808: (6, 48) (27, 45) :110808
134379: (12, 51) (38, 43) :134379
149389: (8, 53) (29, 50) :149389
165464: (20, 54) (38, 48) :165464
171288: (24, 54) (17, 55) :171288
195841: (22, 57) (9, 58) :195841
216027: (3, 60) (22, 59) :216027
216125: (5, 60) (45, 50) :216125
262656: (8, 64) (36, 60) :262656
314496: (30, 66) (4, 68) :314496
320264: (18, 68) (32, 66) :320264
327763: (30, 67) (51, 58) :327763
373464: (54, 60) (6, 72) :373464
402597: (42, 69) (56, 61) :402597
</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../balanced-parentheses/">« Balanced Parentheses</a><a class="docs-footer-nextpage" href="../suffixes/">Generating Suffixes »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Wednesday 7 December 2022 06:22">Wednesday 7 December 2022</span>. Using Julia version 1.8.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
